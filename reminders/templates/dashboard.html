<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Office Zenith - Wellness Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8fafc;
            color: #334155;
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Dark theme styles */
        body.dark {
            background-color: #0f172a;
            color: #e2e8f0;
        }

        body.dark .header,
        body.dark .controls,
        body.dark .reminder-card,
        body.dark .add-reminder-form,
        body.dark .logs-section {
            background: #1e293b;
            border-color: #334155;
        }

        body.dark .timer-info {
            background: #475569;
            border-color: #64748b;
            color: #f1f5f9;
        }

        body.dark .card-title,
        body.dark .logs-header h3,
        body.dark .add-reminder-form h3 {
            color: #f8fafc;
        }

        body.dark .header h1 {
            color: #f8fafc;
        }

        body.dark .header p {
            color: #cbd5e1;
        }

        body.dark .log-title {
            color: #f1f5f9;
        }

        body.dark .card-description,
        body.dark .log-time {
            color: #94a3b8;
        }

        body.dark .timer-info,
        body.dark .log-item {
            background: #334155;
            border-color: #475569;
        }

        body.dark .notification-status {
            background: #334155;
            color: #cbd5e1;
            border-color: #475569;
        }

        body.dark .form-group input,
        body.dark .form-group textarea {
            background: #334155;
            border-color: #475569;
            color: #e2e8f0;
        }

        body.dark .form-group input:focus,
        body.dark .form-group textarea:focus {
            border-color: #3b82f6;
        }

        body.dark .form-group label {
            color: #cbd5e1;
        }

        body.dark .empty-state {
            color: #94a3b8;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 60px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.05"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none;
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: 800;
            color: white;
            margin-bottom: 12px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            letter-spacing: -1px;
        }

        .header p {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 400;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            text-align: center;
        }

        .theme-toggle {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 12px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            color: white;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        body.dark .theme-toggle {
            background: rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        body.dark .theme-toggle:hover {
            background: rgba(0, 0, 0, 0.4);
        }

        .theme-toggle span {
            font-size: 1.2rem;
        }

        .theme-toggle-text {
            font-size: 0.85rem;
            font-weight: 500;
        }

        .header p {
            font-size: 1.1rem;
            color: #dae1eb;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            flex-wrap: wrap;
            gap: 15px;
        }

        .btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }

        .btn-success {
            background: #10b981;
        }

        .btn-success:hover {
            background: #059669;
        }

        .btn-danger {
            background: #ef4444;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-secondary {
            background: #6b7280;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .notification-status {
            background: #f1f5f9;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.9rem;
            color: #475569;
            border: 1px solid #e2e8f0;
        }

        .reminders-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .reminder-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
        }

        .reminder-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .reminder-card.active {
            border-left: 4px solid #10b981;
        }

        .reminder-card.inactive {
            border-left: 4px solid #ef4444;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e293b;
            line-height: 1.4;
            flex: 1;
            margin-right: 16px;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-active {
            background: #dcfce7;
            color: #166534;
        }

        .status-inactive {
            background: #fee2e2;
            color: #991b1b;
        }

        .card-description {
            color: #64748b;
            margin-bottom: 16px;
            font-size: 0.95rem;
        }

        .timer-info {
            background: #f1f5f9;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 500;
            color: #475569;
            border: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn-edit {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            transition: background 0.2s ease;
        }

        .btn-edit:hover {
            background: rgba(59, 130, 246, 0.1);
        }

        .card-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .card-actions .btn {
            flex: 1;
            min-width: 80px;
            justify-content: center;
            font-size: 0.85rem;
            padding: 8px 12px;
        }

        .add-reminder-form {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border: 1px solid #e2e8f0;
            display: none;
        }

        .add-reminder-form.show {
            display: block;
        }

        .add-reminder-form h3 {
            margin-bottom: 20px;
            color: #1e293b;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #374151;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.95rem;
            transition: border-color 0.2s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .logs-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
        }

        .logs-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e2e8f0;
        }

        .logs-header h3 {
            color: #1e293b;
            font-weight: 600;
        }

        .logs-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .log-item {
            background: #f8fafc;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            border-left: 3px solid #3b82f6;
        }

        .log-item:last-child {
            margin-bottom: 0;
        }

        .log-title {
            font-weight: 500;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .log-time {
            font-size: 0.85rem;
            color: #64748b;
        }

        .empty-state {
            text-align: center;
            color: #64748b;
            font-style: italic;
            padding: 40px 20px;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #1e293b;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 300px;
        }

        .toast.show {
            transform: translateX(0);
        }

        .notification-demo {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            color: #92400e;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .reminders-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .header h1 {
                font-size: 2rem;
            }

            .card-actions {
                flex-direction: column;
            }

            .card-actions .btn {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="theme-toggle" onclick="toggleTheme()">
                <span id="themeIcon">üåô</span>
                <span class="theme-toggle-text" id="themeText">Dark</span>
            </div>
            <h1>Office Zenith</h1>
            <p>Your Personal Wellness Reminder System</p>
        </div>

        <div class="notification-demo" id="notificationDemo" style="display: none;">
            <strong>Test your notifications:</strong> Click "Enable Notifications" below, then click "Test Notification" to see if they work properly.
        </div>

        <div class="controls">
            <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                <button class="btn" onclick="toggleAddForm()">
                    + Add Reminder
                </button>
                <button class="btn btn-success" onclick="requestNotificationPermission()">
                    üîî Enable Notifications
                </button>
                <button class="btn btn-secondary" onclick="testNotification()" id="testBtn" style="display: none;">
                    Test Notification
                </button>
            </div>
            <div class="notification-status">
                Status: <span id="notificationState">Checking...</span>
            </div>
        </div>

        <div class="add-reminder-form" id="addReminderForm">
            <h3>Add New Wellness Reminder</h3>
            <form onsubmit="addReminder(event)">
                <div class="form-group">
                    <label for="title">Title</label>
                    <input type="text" id="title" name="title" required placeholder="e.g., Take a break">
                </div>
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" name="description" rows="3" required placeholder="Describe this reminder..."></textarea>
                </div>
                <div class="form-group">
                    <label for="timer">Timer Interval</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="number" id="timerValue" name="timerValue" min="1" max="480" value="30" required style="flex: 1;">
                        <select id="timerUnit" name="timerUnit" style="padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 0.95rem;">
                            <option value="minutes">Minutes</option>
                            <option value="seconds">Seconds</option>
                        </select>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success">Add Reminder</button>
                    <button type="button" class="btn btn-secondary" onclick="toggleAddForm()">Cancel</button>
                </div>
            </form>
        </div>

        <div class="reminders-grid" id="remindersGrid">
            <!-- Reminders will be loaded here -->
        </div>

        <div class="logs-section">
            <div class="logs-header">
                <h3>Activity Logs</h3>
                <div style="display: flex; gap: 10px;">
                    <button class="btn" onclick="downloadTodayLogs()">üì• Download Today's Logs</button>
                    <button class="btn btn-danger" onclick="clearLogs()">Clear Logs</button>
                </div>
            </div>
            <div class="logs-list" id="logsList">
                <!-- Logs will be displayed here -->
            </div>
        </div>
    </div>

    <div class="toast" id="toast">
        <div id="toastMessage"></div>
    </div>

    <script>
        // Default reminders data
        let reminders = [
            {
                id: 1,
                title: "Hydration Break",
                description: "Time to drink a glass of water to stay hydrated and maintain focus.",
                timer: 30,
                isActive: false
            },
            {
                id: 2,
                title: "Eye Rest (20-20-20 Rule)",
                description: "Look at something 20 feet away for 20 seconds to reduce eye strain.",
                timer: 20,
                isActive: false
            },
            {
                id: 3,
                title: "Posture Check",
                description: "Adjust your sitting posture, straighten your back, and relax your shoulders.",
                timer: 45,
                isActive: false
            },
            {
                id: 4,
                title: "Movement Break",
                description: "Stand up, stretch, or take a short walk to improve circulation.",
                timer: 60,
                isActive: false
            }
        ];

        let logs = [];
        let activeTimers = {};

        // Initialize the app
        window.onload = function() {
            loadReminders();
            loadLogs();
            checkNotificationPermission();
            loadTheme();
        };

        function loadTheme() {
            const isDark = localStorage.getItem('darkTheme') === 'true';
            if (isDark) {
                document.body.classList.add('dark');
                document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
                document.getElementById('themeText').textContent = 'Light';
            }
        }

        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            
            body.classList.toggle('dark');
            const isDark = body.classList.contains('dark');
            
            if (isDark) {
                themeIcon.textContent = '‚òÄÔ∏è';
                themeText.textContent = 'Light';
                localStorage.setItem('darkTheme', 'true');
            } else {
                themeIcon.textContent = 'üåô';
                themeText.textContent = 'Dark';
                localStorage.setItem('darkTheme', 'false');
            }
        }

        function downloadTodayLogs() {
            const today = new Date();
            const todayStr = today.toDateString();
            
            // Filter logs for today
            const todayLogs = logs.filter(log => 
                log.timestamp.toDateString() === todayStr
            );

            if (todayLogs.length === 0) {
                showToast('No activities logged today');
                return;
            }

            // Create PDF content
            let pdfContent = `
Office Zenith - Daily Wellness Report
Date: ${todayStr}
Generated: ${today.toLocaleString()}

===========================================

ACTIVITY SUMMARY
===========================================

Total Activities: ${todayLogs.length}
Manual Logs: ${todayLogs.filter(log => !log.automated).length}
Automatic Logs: ${todayLogs.filter(log => log.automated).length}

===========================================

DETAILED LOG
===========================================

`;

            // Add each log entry
            todayLogs.forEach((log, index) => {
                pdfContent += `${index + 1}. ${log.reminderTitle}
   Time: ${log.timestamp.toLocaleString()}
   Type: ${log.automated ? 'Automatic' : 'Manual'}
   
`;
            });

            pdfContent += `
===========================================

REMINDER BREAKDOWN
===========================================

`;

            // Group by reminder type
            const reminderStats = {};
            todayLogs.forEach(log => {
                if (!reminderStats[log.reminderTitle]) {
                    reminderStats[log.reminderTitle] = 0;
                }
                reminderStats[log.reminderTitle]++;
            });

            Object.entries(reminderStats).forEach(([title, count]) => {
                pdfContent += `${title}: ${count} times\n`;
            });

            // Create and download the file
            const blob = new Blob([pdfContent], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `office-zenith-logs-${today.getFullYear()}-${(today.getMonth()+1).toString().padStart(2,'0')}-${today.getDate().toString().padStart(2,'0')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);

            showToast(`Downloaded ${todayLogs.length} activities for today`);
        }

        function loadReminders() {
            const grid = document.getElementById('remindersGrid');
            grid.innerHTML = '';

            if (reminders.length === 0) {
                grid.innerHTML = '<div class="empty-state">No reminders yet. Add your first wellness reminder!</div>';
                return;
            }

            reminders.forEach(reminder => {
                const card = createReminderCard(reminder);
                grid.appendChild(card);
                
                if (reminder.isActive) {
                    startTimer(reminder.id, reminder.timer);
                }
            });
        }

        function createReminderCard(reminder) {
            const card = document.createElement('div');
            card.className = `reminder-card ${reminder.isActive ? 'active' : 'inactive'}`;
            card.innerHTML = `
                <div class="card-header">
                    <h3 class="card-title">${reminder.title}</h3>
                    <span class="status-badge ${reminder.isActive ? 'status-active' : 'status-inactive'}">
                        ${reminder.isActive ? 'Active' : 'Inactive'}
                    </span>
                </div>
                <p class="card-description">${reminder.description}</p>
                <div class="timer-info">
                    <span>Every ${reminder.originalValue || reminder.timer} ${reminder.timerUnit || 'minutes'}</span>
                    <button class="btn-edit" onclick="editTimer(${reminder.id})">‚úèÔ∏è</button>
                </div>
                <div class="card-actions">
                    <button class="btn ${reminder.isActive ? 'btn-danger' : 'btn-success'}" 
                            onclick="toggleReminder(${reminder.id})">
                        ${reminder.isActive ? 'Stop' : 'Start'}
                    </button>
                    <button class="btn" onclick="logActivity(${reminder.id})">
                        Log Now
                    </button>
                    <button class="btn btn-secondary" onclick="deleteReminder(${reminder.id})">
                        Delete
                    </button>
                </div>
            `;
            return card;
        }

        function toggleReminder(id) {
            const reminder = reminders.find(r => r.id === id);
            if (reminder) {
                reminder.isActive = !reminder.isActive;
                
                if (reminder.isActive) {
                    if (Notification.permission !== 'granted') {
                        showToast('Please enable notifications first!');
                        reminder.isActive = false;
                        return;
                    }
                    startTimer(id, reminder.timer);
                    showToast(`${reminder.title} started!`);
                } else {
                    stopTimer(id);
                    showToast(`${reminder.title} stopped!`);
                }
                
                loadReminders();
            }
        }

        function startTimer(reminderId, minutes) {
            stopTimer(reminderId); // Clear any existing timer
            
            console.log(`Starting timer for reminder ${reminderId} - ${minutes} minutes`);
            
            // For demo purposes, use shorter intervals (30 seconds instead of full minutes)
            // Remove this line and uncomment the one below for production
            const intervalMs = 30000; // 30 seconds for testing
            // const intervalMs = minutes * 60 * 1000; // Actual minutes for production
            
            activeTimers[reminderId] = setInterval(() => {
                const reminder = reminders.find(r => r.id === reminderId);
                if (reminder && reminder.isActive) {
                    console.log(`Timer triggered for: ${reminder.title}`);
                    showNotification(reminder.title, reminder.description);
                    logActivity(reminderId, true);
                }
            }, intervalMs);
        }

        function stopTimer(reminderId) {
            if (activeTimers[reminderId]) {
                clearInterval(activeTimers[reminderId]);
                delete activeTimers[reminderId];
                console.log(`Timer stopped for reminder ${reminderId}`);
            }
        }

        function showNotification(title, description) {
            console.log('Attempting to show notification:', title);
            
            if (!('Notification' in window)) {
                console.log('Browser does not support notifications');
                showToast('Browser does not support notifications');
                return;
            }

            if (Notification.permission === 'granted') {
                try {
                    const notification = new Notification(`Office Zenith: ${title}`, {
                        body: description,
                        icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üßò</text></svg>',
                        requireInteraction: false,
                        silent: false
                    });
                    
                    console.log('Notification created successfully');
                    
                    notification.onclick = function() {
                        console.log('Notification clicked');
                        window.focus();
                        this.close();
                    };
                    
                    // Auto close after 5 seconds
                    setTimeout(() => {
                        notification.close();
                    }, 5000);
                    
                } catch (error) {
                    console.error('Error creating notification:', error);
                    showToast('Error showing notification: ' + error.message);
                }
            } else {
                console.log('Notification permission not granted:', Notification.permission);
                showToast('Notifications not permitted');
            }
        }

        function testNotification() {
            console.log('Testing notification...');
            
            if (!('Notification' in window)) {
                console.log('Notifications not supported');
                showToast('Your browser does not support notifications');
                return;
            }

            if (Notification.permission !== 'granted') {
                console.log('Permission not granted');
                showToast('Please enable notifications first');
                return;
            }

            try {
                // Create a simple test notification
                const notification = new Notification('Office Zenith Test', {
                    body: 'If you can see this, notifications are working perfectly!',
                    icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48dGV4dCB5PSIuOWVtIiBmb250LXNpemU9IjkwIj7wn6eYPC90ZXh0Pjwvc3ZnPg==',
                    tag: 'test-notification',
                    requireInteraction: false
                });

                console.log('Test notification created');
                showToast('Test notification sent!');

                // Handle click
                notification.onclick = function() {
                    console.log('Test notification clicked');
                    window.focus();
                    this.close();
                };

                // Auto close after 5 seconds
                setTimeout(() => {
                    notification.close();
                }, 5000);

            } catch (error) {
                console.error('Error creating test notification:', error);
                showToast('Error: ' + error.message);
            }
        }

        function logActivity(reminderId, automated = false) {
            const reminder = reminders.find(r => r.id === reminderId);
            if (reminder) {
                const log = {
                    id: Date.now(),
                    reminderId: reminderId,
                    reminderTitle: reminder.title,
                    timestamp: new Date(),
                    automated: automated
                };
                
                logs.unshift(log);
                loadLogs();
                
                if (!automated) {
                    showToast(`Activity logged: ${reminder.title}`);
                }
            }
        }

        function loadLogs() {
            const logsList = document.getElementById('logsList');
            
            if (logs.length === 0) {
                logsList.innerHTML = '<div class="empty-state">No activities logged yet.</div>';
                return;
            }

            logsList.innerHTML = logs.slice(0, 20).map(log => `
                <div class="log-item">
                    <div class="log-title">${log.reminderTitle}</div>
                    <div class="log-time">${log.timestamp.toLocaleString()} ${log.automated ? '(Auto)' : '(Manual)'}</div>
                </div>
            `).join('');
        }

        function clearLogs() {
            if (confirm('Are you sure you want to clear all logs?')) {
                logs = [];
                loadLogs();
                showToast('Logs cleared');
            }
        }

        function addReminder(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const timerValue = parseInt(formData.get('timerValue'));
            const timerUnit = formData.get('timerUnit');
            
            // Convert to minutes for storage
            const timerInMinutes = timerUnit === 'seconds' ? timerValue / 60 : timerValue;
            
            const newReminder = {
                id: Date.now(),
                title: formData.get('title'),
                description: formData.get('description'),
                timer: timerInMinutes,
                timerUnit: timerUnit,
                originalValue: timerValue,
                isActive: false
            };
            
            reminders.push(newReminder);
            loadReminders();
            
            // Reset form and hide it
            event.target.reset();
            toggleAddForm();
            
            showToast('Reminder added successfully');
        }

        function editTimer(id) {
            const reminder = reminders.find(r => r.id === id);
            if (!reminder) return;
            
            const currentUnit = reminder.timerUnit || 'minutes';
            const currentValue = reminder.originalValue || reminder.timer;
            
            const newValue = prompt(`Enter new timer value (current: ${currentValue} ${currentUnit}):`, currentValue);
            if (newValue === null || newValue === '') return;
            
            const numValue = parseInt(newValue);
            if (isNaN(numValue) || numValue <= 0) {
                showToast('Please enter a valid number');
                return;
            }
            
            const newUnit = confirm('Click OK for minutes, Cancel for seconds') ? 'minutes' : 'seconds';
            const timerInMinutes = newUnit === 'seconds' ? numValue / 60 : numValue;
            
            // Stop current timer if running
            if (reminder.isActive) {
                stopTimer(id);
            }
            
            // Update reminder
            reminder.timer = timerInMinutes;
            reminder.timerUnit = newUnit;
            reminder.originalValue = numValue;
            
            // Restart timer if it was active
            if (reminder.isActive) {
                startTimer(id, timerInMinutes);
            }
            
            loadReminders();
            showToast(`Timer updated to ${numValue} ${newUnit}`);
        }

        function deleteReminder(id) {
            if (confirm('Delete this reminder?')) {
                stopTimer(id);
                reminders = reminders.filter(r => r.id !== id);
                logs = logs.filter(log => log.reminderId !== id);
                loadReminders();
                loadLogs();
                showToast('Reminder deleted');
            }
        }

        function toggleAddForm() {
            const form = document.getElementById('addReminderForm');
            form.classList.toggle('show');
        }

        function requestNotificationPermission() {
            if (!('Notification' in window)) {
                showToast('Browser does not support notifications');
                return;
            }

            console.log('Requesting notification permission...');
            
            Notification.requestPermission().then(function(permission) {
                console.log('Permission result:', permission);
                checkNotificationPermission();
                
                if (permission === 'granted') {
                    showToast('Notifications enabled!');
                    // Show test notification immediately
                    setTimeout(() => {
                        testNotification();
                    }, 1000);
                } else {
                    showToast('Notifications permission denied');
                }
            }).catch(function(error) {
                console.error('Error requesting permission:', error);
                showToast('Error requesting notification permission');
            });
        }

        function checkNotificationPermission() {
            const statusElement = document.getElementById('notificationState');
            const testBtn = document.getElementById('testBtn');
            const demoDiv = document.getElementById('notificationDemo');
            
            if (!('Notification' in window)) {
                statusElement.textContent = 'Not Supported';
                statusElement.style.color = '#ef4444';
                testBtn.style.display = 'none';
                return;
            }

            console.log('Current notification permission:', Notification.permission);
            
            switch (Notification.permission) {
                case 'granted':
                    statusElement.textContent = 'Enabled';
                    statusElement.style.color = '#10b981';
                    testBtn.style.display = 'inline-flex';
                    demoDiv.style.display = 'block';
                    break;
                case 'denied':
                    statusElement.textContent = 'Denied';
                    statusElement.style.color = '#ef4444';
                    testBtn.style.display = 'none';
                    break;
                default:
                    statusElement.textContent = 'Click Enable';
                    statusElement.style.color = '#f59e0b';
                    testBtn.style.display = 'none';
                    demoDiv.style.display = 'block';
            }
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            const messageElement = document.getElementById('toastMessage');
            
            messageElement.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>

segregate this code in to css js and html